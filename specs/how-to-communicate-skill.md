# Plan: How To Communicate Skill

## Task Description

Создать новый скилл "How To Communicate" для системы квалификации клиентов по недвижимости на Бали. Скилл должен содержать **мета-анализ и синтез** всех подготовленных материалов:
- Методички и регламенты (уже структурированы)
- Записи звонков с фидбэками (требуют транскрибации и анализа)
- Knowledge base (для фактологической поддержки)

**Ключевой принцип:** Скилл НЕ содержит сырые транскрипты. Скилл содержит СИНТЕЗИРОВАННЫЕ ЗНАНИЯ — паттерны успеха, антипаттерны провала, структурированные методологии.

**Связь с Tone of Voice:**
- Tone Of Voice → КАК общаться (стиль, тон, 7 принципов)
- How To Communicate → ЧТО говорить (методологии, скрипты, паттерны из реальных звонков)

## Objective

По завершении плана будет создан скилл `how-to-communicate/`, который:
- Предоставляет **синтезированную методологию** на основе анализа реальных звонков
- Содержит **паттерны успешных звонков** (что делать) из положительных фидбэков
- Содержит **антипаттерны** (чего избегать) из негативных фидбэков
- Структурирует скрипты возражений с привязкой к knowledge base
- Дает четкие критерии оценки качества коммуникации

## Problem Statement

Материалы для обучения квалификаторов существуют в разрозненном виде:
- Методички (Змейка, BANT) — хорошо структурированы, но абстрактны
- Записи звонков + фидбэки — слабо структурированы, паттерны не извлечены
- Knowledge base — не связана с процессом коммуникации
- Нет единого документа: "Делай так → получишь результат. Не делай так → провал."

## Solution Approach

### Фаза 0: Подготовка данных (pre-requisite)
1. **Транскрибировать** все аудио/видео через ElevenLabs (для анализа, НЕ для копирования в скилл)
2. **Проанализировать** каждый транскрипт вместе с фидбэком
3. **Извлечь** паттерны: что сработало / что провалилось

### Фаза 1: Мета-анализ
1. **Категоризировать** все фидбэки: положительные vs негативные
2. **Выявить** повторяющиеся паттерны успеха
3. **Выявить** повторяющиеся антипаттерны
4. **Сопоставить** с методологиями (применялась ли Змейка? BANT?)

### Фаза 2: Синтез знаний
1. **Создать** синтезированную методологию на основе анализа
2. **Обогатить** методологии реальными примерами (цитаты, а не полные транскрипты)
3. **Связать** скрипты возражений с knowledge base
4. **Разработать** чеклист оценки на основе паттернов

## Relevant Files

### Источники для анализа

**Уже структурированные документы (основа методологий):**
- `data/how_to_communicate/методичка_змейка.md` — 4-этапная методология
- `data/how_to_communicate/True Real Estate - Регламент Квалификации Лида.md` — BANT, классы лидов
- `data/how_to_communicate/Скрипты_и_работа_с_возражениями.md` — 20+ скриптов

**Требуют транскрибации и анализа (источники паттернов):**
| Файл | Фидбэк | Предполагаемый рейтинг |
|------|--------|------------------------|
| `calls/АнтонЗвонок.m4a` | `АнтонFeedback.md` | Негативный: нет Змейки, нет бюджета |
| `calls/Витор_*.m4a` | `витор_фидбек.md` | Положительный: хороший тестовый звонок |
| `calls/ольга_неудачно.mp4` | `.md` | Негативный: название говорит само за себя |
| `calls/ЮлияТкач.MP4` | `Фидбек.md` | Требует анализа |
| `calls/Август.m4a` | `фидбек.md` | Требует анализа |
| `calls/валерий.mp3` | `фидбек.md` | Требует анализа |
| `calls/виталий.mp4` | `ВиталийФидбек.md` | Требует анализа |
| `calls/irina_*.m4a` | `*_analysis.md` | Требует анализа |
| `calls/veronika_*.m4a` | `*_analysis.md` | Требует анализа |

**Существующие транскрипты (уже готовы к анализу):**
- `calls/SergeyTranscript.vtt` + `SergeyFeedback.md`
- `calls/ХорошаяКалибровка.vtt` — положительный пример
- `calls/ХорошийРазбор.vtt` — положительный пример

**Knowledge Base (для обогащения скриптов):**
- `knowledge_base_final/02_LEGAL_FRAMEWORK.md` — факты для возражений о leasehold
- `knowledge_base_final/03_TAX_GUIDE.md` — факты для возражений о налогах
- `knowledge_base_final/04_FINANCIAL_MODEL_ANALYSIS.md` — факты для возражений о ROI
- `knowledge_base_final/05_SALES_TOOLKIT.md` — USPs компании

**Reference скилл:**
- `.claude/skills/tone-of-voice/` — стиль коммуникации, 7 принципов, scoring 35/50

### New Files (Структура скилла)

```
.claude/skills/how-to-communicate/
├── SKILL.md                              # Основной файл: принципы + quick reference
└── references/
    ├── паттерны_успеха.md                # Синтез: что делать (из положительных фидбэков)
    ├── антипаттерны.md                   # Синтез: чего избегать (из негативных фидбэков)
    ├── методология_змейка_обогащенная.md # Змейка + реальные примеры применения
    ├── методология_bant.md               # BANT + примеры вопросов
    ├── скрипты_возражения.md             # Категоризированные скрипты + ссылки на KB
    ├── классы_лидов.md                   # A/B/C + признаки идентификации
    └── чеклист_оценки.md                 # Расширенный scoring на основе паттернов
```

**Принцип организации файлов:**
- Свобода комбинировать контент — файлы могут объединяться если логично
- Нет сырых транскриптов — только цитаты как примеры
- Каждый файл — законченная единица знаний

## Implementation Phases

### Phase 1: Транскрибация и первичный анализ

**Шаг 1.1: Транскрибация всех аудио/видео**
```bash
# Для каждого файла в data/how_to_communicate/calls/
uv run .claude/skills/eleven-labs/scripts/transcribe.py <file> \
    --diarize \
    --format markdown \
    --language ru \
    --output data/how_to_communicate/calls/transcripts/<name>.md
```

**Шаг 1.2: Первичный анализ каждого звонка**
Для каждого транскрипта + фидбэка определить:
- Rating: положительный / негативный / нейтральный
- Применена ли Змейка? (да/нет/частично)
- Выявлен ли BANT? (B/A/N/T — какие компоненты)
- Ключевые цитаты для примеров
- Главные ошибки (если негативный)
- Главные успехи (если положительный)

### Phase 2: Мета-анализ и извлечение паттернов

**Шаг 2.1: Группировка по качеству**
Создать две списка:
1. **Положительные примеры** — звонки с хорошими фидбэками
2. **Негативные примеры** — звонки с критикой

**Шаг 2.2: Извлечение паттернов успеха**
Из положительных примеров извлечь:
- Как именно применялась Змейка?
- Какие вопросы сработали для BANT?
- Как демонстрировалась экспертность?
- Как закрывали на Zoom?
- Конкретные фразы/цитаты для примеров

**Шаг 2.3: Извлечение антипаттернов**
Из негативных примеров извлечь:
- Что именно пошло не так?
- Какие методологии НЕ применялись?
- Типичные ошибки (из фидбэка Антона: "нет Змейки, нет бюджета за 5 минут")
- Красные флаги в поведении менеджера

### Phase 3: Синтез и создание скилла

**Шаг 3.1: SKILL.md — основной файл**
- YAML frontmatter (name, description, trigger, author)
- 10 Принципов эффективной коммуникации (синтез из анализа)
- Quick Evaluation Checklist
- Ссылки на reference файлы

**Шаг 3.2: references/паттерны_успеха.md**
Структура:
```markdown
# Паттерны Успешных Звонков

## 1. Начало разговора
[Что делать + цитата из хорошего звонка]

## 2. Применение Змейки
[Как правильно переходить между этапами + примеры]

## 3. Выявление BANT
[Работающие вопросы из реальных звонков]

## 4. Демонстрация экспертности
[Как и когда вставлять экспертные комментарии]

## 5. Закрытие на Zoom
[Формулировки которые работали]
```

**Шаг 3.3: references/антипаттерны.md**
Структура:
```markdown
# Антипаттерны: Чего Избегать

## 1. Провал: Пропуск Змейки
[Пример из негативного фидбэка + последствия]
> "На 5 минуте я не услышал даже вопроса про бюджет" — АнтонFeedback

## 2. Провал: Неаргументированные утверждения
[Пример: "доходность 15-17% — это не аргументировано"]

## 3. Провал: Отсутствие экспертности
[Когда менеджер не добавляет ценности]

## 4. Провал: Сдача на "вышлите каталог"
[Из Регламента: плохой vs хороший звонок]
```

**Шаг 3.4: references/методология_змейка_обогащенная.md**
- Базовая структура из `методичка_змейка.md`
- Обогащение реальными примерами из звонков
- Секция "Частые ошибки" из антипаттернов

**Шаг 3.5: references/скрипты_возражения.md**
Категоризация с ссылками на KB:
```markdown
## Юридические возражения

### "Leasehold — это не собственность"
**Короткий ответ:** [из скриптов]
**Факты:** См. [knowledge_base_final/02_LEGAL_FRAMEWORK.md]
**Полный скрипт:** [развернутый ответ]

### "Законы могут измениться"
...
```

**Шаг 3.6: references/чеклист_оценки.md**
Scoring система на основе выявленных паттернов:
```markdown
# Чеклист Оценки Звонка

## Pre-call (подготовка)
- [ ] Изучена информация о лиде
- [ ] Подготовлены вопросы для Змейки

## During-call (критические точки)
| Критерий | Вес | Проверка |
|----------|-----|----------|
| Змейка: легкий вопрос в начале | 10 | Задан ли открытый вопрос в первые 2 мин? |
| Змейка: отражение | 10 | Переформулировал ли ответ клиента? |
| Змейка: экспертность | 10 | Добавлен ли проф. комментарий? |
| BANT: Budget | 10 | Выяснен ли бюджет? |
| BANT: Authority | 5 | Кто принимает решение? |
| BANT: Need | 10 | Оформлен ли спрос? |
| BANT: Time | 5 | Когда готов покупать? |
| Закрытие на Zoom | 20 | Предложены ли конкретные слоты? |
| Работа с возражениями | 10 | Отработаны ли возражения с аргументами? |
| Тон (из Tone of Voice) | 10 | Профессионально но тепло? |

**Порог:** < 60/100 = требуется доработка
```

## Step by Step Tasks

IMPORTANT: Execute every step in order, top to bottom.

### 1. Транскрибировать все аудио/видео
- Создать директорию `data/how_to_communicate/calls/transcripts/`
- Транскрибировать каждый файл через ElevenLabs с `--diarize`
- Сохранить транскрипты в созданную директорию

### 2. Прочитать все фидбэки и транскрипты
- Для каждого звонка: транскрипт + соответствующий фидбэк
- Создать рабочий файл `data/how_to_communicate/analysis_notes.md`:
  ```markdown
  # Анализ звонков

  ## Звонок: Антон
  - **Rating:** Негативный
  - **Змейка:** Не применена
  - **BANT:** B-нет, A-?, N-частично, T-нет
  - **Ключевые ошибки:** [список из фидбэка]
  - **Цитаты для антипаттернов:** [конкретные примеры]

  ## Звонок: Витор
  - **Rating:** Положительный
  - ...
  ```

### 3. Сгруппировать звонки по качеству
- Разделить на положительные и негативные
- Для каждой группы выписать общие черты

### 4. Извлечь паттерны успеха
- Проанализировать все положительные звонки
- Выявить: что общего? какие техники работали?
- Собрать конкретные цитаты/примеры

### 5. Извлечь антипаттерны
- Проанализировать все негативные звонки
- Выявить: какие ошибки повторяются?
- Собрать конкретные цитаты как "не надо делать"

### 6. Создать структуру скилла
- Создать `.claude/skills/how-to-communicate/`
- Создать `references/`

### 7. Написать SKILL.md
- YAML frontmatter
- 10 Принципов (синтез из анализа)
- Quick Evaluation Checklist
- Ссылки на references

### 8. Написать references/паттерны_успеха.md
- Структурировать по этапам звонка
- Включить реальные примеры (цитаты)
- Связать с методологиями

### 9. Написать references/антипаттерны.md
- Структурировать по типам ошибок
- Включить примеры из негативных фидбэков
- Показать последствия каждого антипаттерна

### 10. Написать references/методология_змейка_обогащенная.md
- Базовая структура из методички
- Добавить реальные примеры применения
- Добавить секцию "Частые ошибки"

### 11. Написать references/методология_bant.md
- Структура B-A-N-T
- Вопросы из успешных звонков
- Красные флаги по каждому компоненту

### 12. Написать references/скрипты_возражения.md
- Категоризировать по типам
- Добавить ссылки на knowledge_base
- Формат: короткий ответ + факты + полный скрипт

### 13. Написать references/классы_лидов.md
- A/B/C классификация
- Признаки идентификации
- Стратегия работы с каждым классом

### 14. Написать references/чеклист_оценки.md
- Scoring система на основе паттернов
- Веса критериев
- Порог качества

### 15. Валидация скилла
- Проверить все markdown ссылки
- Проверить YAML frontmatter
- Тестировать skill discovery

## Testing Strategy

1. **Полнота анализа**
   - Все ли звонки проанализированы?
   - Извлечены ли паттерны из каждого?

2. **Качество синтеза**
   - Содержит ли скилл actionable guidance?
   - Понятно ли что делать и чего избегать?

3. **Skill Discovery**
   - Query: "Как подготовиться к квалификационному звонку?"
   - Query: "Что делать если клиент просит каталог?"
   - Expected: Скилл загружается и дает релевантный ответ

4. **Интеграция с Tone of Voice**
   - Дополняют ли скиллы друг друга?
   - Нет ли противоречий в рекомендациях?

## Acceptance Criteria

1. **Анализ завершен**
   - [ ] Все аудио/видео транскрибированы
   - [ ] Все звонки категоризированы (положительные/негативные)
   - [ ] Паттерны успеха извлечены и документированы
   - [ ] Антипаттерны извлечены и документированы

2. **Скилл создан**
   - [ ] SKILL.md с YAML frontmatter
   - [ ] Все reference файлы созданы
   - [ ] SKILL.md < 500 строк
   - [ ] Все на русском языке

3. **Качество контента**
   - [ ] Паттерны содержат реальные примеры (цитаты)
   - [ ] Антипаттерны показывают последствия
   - [ ] Методологии обогащены примерами
   - [ ] Чеклист основан на выявленных паттернах

4. **Интеграция**
   - [ ] Ссылки на knowledge_base работают
   - [ ] Cross-references с Tone of Voice
   - [ ] Skill discovery работает

## Validation Commands

```bash
# Проверить структуру скилла
ls -la .claude/skills/how-to-communicate/
ls -la .claude/skills/how-to-communicate/references/

# Проверить YAML frontmatter
head -10 .claude/skills/how-to-communicate/SKILL.md

# Проверить размер
wc -l .claude/skills/how-to-communicate/SKILL.md

# Проверить наличие всех reference файлов
ls .claude/skills/how-to-communicate/references/
```

## Notes

**Ключевой принцип реализации:**
Скилл = СИНТЕЗ, а не копирование. Транскрипты нужны для анализа, но в скилл попадают только:
- Извлеченные паттерны
- Конкретные цитаты как примеры
- Структурированные методологии

**Свобода в структуре файлов:**
- Можно объединять файлы если логично
- Можно создавать новые файлы если нужно
- Главное — понятная, actionable структура

**Формат примеров в скилле:**
```markdown
### Правильно: Демонстрация экспертности после отражения
> Менеджер: "Вы рассматриваете виллу, но хотите быть уверены... Верно?"
> Клиент: "Да, именно так."
> Менеджер: "На Бали виллы — это действительно один из самых привлекательных сегментов..."

### Неправильно: Экспертность без контекста
> "Доходность 15-17% — круглый год туристы" — это НЕ аргументировано
```

**Связь с Tone of Voice:**
- How To Communicate фокусируется на СОДЕРЖАНИИ
- Tone of Voice фокусируется на ФОРМЕ
- Оба скилла должны использоваться вместе
